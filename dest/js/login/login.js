"use strict";define(["jquery"],function(a){var i=window.localStorage;a("button").on("click",function(){var t=a(".user").val().trim(),e=a(".pwd").val().trim(),s="";if(""===t||""===e)s="!用户名或者密码不能为空";else{/^1[34578]\d{9}$/.test(t)||/^\w+@\w+\.[com|net|cn]$/.test(e)||(s="!用户名输入格式有误");if(/[^0-9a-z]/i.test(e)||e.length<5||10<e.length)s="!密码格式输入有误";else{(/^\d{5,10}$/.test(e)||/^[a-z]{5,10}$/i.test(e))&&(s="!密码格式输入有误")}}s?a(".tip").html(s):a(this).hasClass("login")?a.ajax({url:"/api/login",type:"post",dataType:"json",data:{user:t,pwd:e},success:function(t){t.code?(history.go(-1),i.setItem("userInfo",1)):alert("用户名或密码错误请重新登陆")}}):a.ajax({url:"/api/register",type:"post",dataType:"json",data:{user:t,pwd:e},success:function(t){t.code&&alert("注册成功请登录")}})}),a(".eye").on("click",function(){a(this).toggleClass("pwd-eye"),a(this).hasClass("pwd-eye")?a(".pwd").attr("type","text"):a(".pwd").attr("type","password")})});